[2025-09-07 10:41:50.732 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-07 10:41:51.873 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-07 10:41:51.874 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-07 10:41:52.044 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-07 10:41:52.045 +03:00  INF]  Hosting environment: Development
[2025-09-07 10:41:52.045 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-07 10:41:53.905 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-07 10:41:54.412 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 522.005ms
[2025-09-07 10:41:55.296 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-07 10:41:55.334 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 38.5563ms
[2025-09-07 10:41:55.401 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-07 10:41:55.484 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.523ms
[2025-09-07 10:41:56.254 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-07 10:41:56.306 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 52.2611ms
[2025-09-07 10:45:14.445 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/GetBookingWithDetails - application/json 61
[2025-09-07 10:45:16.169 +03:00  INF]  CORS policy execution successful.
[2025-09-07 10:45:16.172 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App)'
[2025-09-07 10:45:16.208 +03:00  INF]  Route matched with {action = "GetBookingWithDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingWithDetails(ITravelApp.Data.Models.Bookings.BookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 10:45:21.659 +03:00  INF]  Executed DbCommand (118ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 10:45:21.717 +03:00  INF]  Executing OkObjectResult, writing value of type 'ITravelApp.Data.Entities.bookingwithdetail'.
[2025-09-07 10:45:21.755 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App) in 5540.0904ms
[2025-09-07 10:45:21.756 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App)'
[2025-09-07 10:45:21.768 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/GetBookingWithDetails - 200 null application/json; charset=utf-8 7323.2215ms
[2025-09-07 10:47:47.969 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/GetBookingWithDetails - application/json 61
[2025-09-07 10:47:47.988 +03:00  INF]  CORS policy execution successful.
[2025-09-07 10:47:47.988 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App)'
[2025-09-07 10:47:47.989 +03:00  INF]  Route matched with {action = "GetBookingWithDetails", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetBookingWithDetails(ITravelApp.Data.Models.Bookings.BookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 10:47:49.970 +03:00  INF]  Executed DbCommand (3ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 10:47:49.972 +03:00  INF]  Executing OkObjectResult, writing value of type 'ITravelApp.Data.Entities.bookingwithdetail'.
[2025-09-07 10:47:49.972 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App) in 1983.2746ms
[2025-09-07 10:47:49.972 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.GetBookingWithDetails (ITravel_App)'
[2025-09-07 10:47:49.973 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/GetBookingWithDetails - 200 null application/json; charset=utf-8 2003.9937ms
[2025-09-07 15:12:41.607 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-07 15:12:42.312 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-07 15:12:42.313 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-07 15:12:42.502 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-07 15:12:42.502 +03:00  INF]  Hosting environment: Development
[2025-09-07 15:12:42.502 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-07 15:12:43.506 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-07 15:12:44.104 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 616.014ms
[2025-09-07 15:12:44.273 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-07 15:12:44.482 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 208.6727ms
[2025-09-07 15:12:44.484 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-07 15:12:45.068 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 583.8213ms
[2025-09-07 15:12:46.768 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-07 15:12:46.844 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 76.2079ms
[2025-09-07 15:13:41.925 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json 61
[2025-09-07 15:13:43.906 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:13:43.910 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:13:43.948 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:13:43.962 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 5.4404ms
[2025-09-07 15:13:43.963 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:13:43.966 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ITravel_App.Services.IMailService' while attempting to activate 'ITravel_App.Controllers.BookingController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-07 15:13:44.015 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 2090.1581ms
[2025-09-07 15:17:57.144 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-07 15:17:58.308 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-07 15:17:58.309 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-07 15:17:58.739 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-07 15:17:58.740 +03:00  INF]  Hosting environment: Development
[2025-09-07 15:17:58.740 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-07 15:17:59.880 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-07 15:18:00.641 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 773.6316ms
[2025-09-07 15:18:00.747 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-07 15:18:00.867 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 119.8172ms
[2025-09-07 15:18:00.868 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-07 15:18:01.050 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 182.1372ms
[2025-09-07 15:18:01.174 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-07 15:18:01.335 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 160.6865ms
[2025-09-07 15:18:47.287 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-07 15:18:47.580 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:18:47.582 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:18:47.650 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:19:00.310 +03:00  INF]  Executed DbCommand (158ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-07 15:19:00.747 +03:00  INF]  Executed DbCommand (14ms) [Parameters=[@p21='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Int32), @p13='?', @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?', @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int64), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_nationality = @p8, client_phone = @p9, currency_code = @p10, gift_code = @p11, infant_num = @p12, pickup_address = @p13, pickup_time = @p14, total_pax = @p15, total_price = @p16, trip_code = @p17, trip_date = @p18, trip_id = @p19, trip_type = @p20
WHERE id = @p21;
[2025-09-07 15:19:00.801 +03:00  INF]  Executed DbCommand (10ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 15:19:01.025 +03:00  INF]  Executed DbCommand (21ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-07 15:19:01.794 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-07 15:19:01.838 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 14182.2297ms
[2025-09-07 15:19:01.838 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:19:01.854 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 5 application/json; charset=utf-8 14566.6682ms
[2025-09-07 15:19:18.151 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-07 15:19:18.200 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:19:18.200 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:19:18.201 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:19:31.772 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-07 15:19:37.641 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@p21='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Int32), @p13='?', @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?', @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int64), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_nationality = @p8, client_phone = @p9, currency_code = @p10, gift_code = @p11, infant_num = @p12, pickup_address = @p13, pickup_time = @p14, total_pax = @p15, total_price = @p16, trip_code = @p17, trip_date = @p18, trip_id = @p19, trip_type = @p20
WHERE id = @p21;
[2025-09-07 15:19:41.166 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 15:19:45.042 +03:00  INF]  Executed DbCommand (110ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-07 15:20:33.424 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-07 15:20:33.425 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 75224.123ms
[2025-09-07 15:20:33.425 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:20:33.425 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 5 application/json; charset=utf-8 75274.7327ms
[2025-09-07 15:22:27.162 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-07 15:22:27.753 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-07 15:22:27.754 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-07 15:22:28.463 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-07 15:22:28.463 +03:00  INF]  Hosting environment: Development
[2025-09-07 15:22:28.464 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-07 15:22:29.101 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-07 15:22:29.594 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 504.7685ms
[2025-09-07 15:22:29.641 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-07 15:22:29.689 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 48.129ms
[2025-09-07 15:22:29.691 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-07 15:22:29.879 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 188.1245ms
[2025-09-07 15:22:30.012 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-07 15:22:30.111 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 98.9334ms
[2025-09-07 15:23:47.504 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-07 15:23:47.833 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:23:47.837 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:23:47.882 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:23:54.639 +03:00  INF]  Executed DbCommand (223ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-07 15:23:55.100 +03:00  INF]  Executed DbCommand (11ms) [Parameters=[@p21='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Int32), @p13='?', @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?', @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int64), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_nationality = @p8, client_phone = @p9, currency_code = @p10, gift_code = @p11, infant_num = @p12, pickup_address = @p13, pickup_time = @p14, total_pax = @p15, total_price = @p16, trip_code = @p17, trip_date = @p18, trip_id = @p19, trip_type = @p20
WHERE id = @p21;
[2025-09-07 15:23:55.158 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 15:23:55.503 +03:00  INF]  Executed DbCommand (45ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-07 15:23:55.746 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-07 15:23:55.810 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 7917.5698ms
[2025-09-07 15:23:55.810 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:23:55.827 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 5 application/json; charset=utf-8 8323.0958ms
[2025-09-07 15:24:38.686 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-07 15:24:38.706 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:24:38.706 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:24:38.707 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:24:41.442 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-07 15:24:41.449 +03:00  INF]  Executed DbCommand (3ms) [Parameters=[@p21='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Int32), @p13='?', @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?', @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int64), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_nationality = @p8, client_phone = @p9, currency_code = @p10, gift_code = @p11, infant_num = @p12, pickup_address = @p13, pickup_time = @p14, total_pax = @p15, total_price = @p16, trip_code = @p17, trip_date = @p18, trip_id = @p19, trip_type = @p20
WHERE id = @p21;
[2025-09-07 15:24:41.452 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 15:24:41.459 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-07 15:26:25.398 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-07 15:26:26.499 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-07 15:26:26.500 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-07 15:26:26.724 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-07 15:26:26.725 +03:00  INF]  Hosting environment: Development
[2025-09-07 15:26:26.725 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-07 15:26:27.994 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-07 15:26:28.440 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 460.1308ms
[2025-09-07 15:26:29.121 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-07 15:26:29.129 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 8.1751ms
[2025-09-07 15:26:30.395 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-07 15:26:30.524 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 129.3623ms
[2025-09-07 15:26:33.225 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-07 15:26:33.397 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.3399ms
[2025-09-07 15:27:11.551 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-07 15:27:11.888 +03:00  INF]  CORS policy execution successful.
[2025-09-07 15:27:11.891 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:27:11.940 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-07 15:27:18.688 +03:00  INF]  Executed DbCommand (157ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-07 15:27:19.104 +03:00  INF]  Executed DbCommand (11ms) [Parameters=[@p21='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?' (DbType = Int32), @p13='?', @p14='?', @p15='?' (DbType = Int32), @p16='?' (DbType = Decimal), @p17='?', @p18='?' (DbType = DateTime2), @p19='?' (DbType = Int64), @p20='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_nationality = @p8, client_phone = @p9, currency_code = @p10, gift_code = @p11, infant_num = @p12, pickup_address = @p13, pickup_time = @p14, total_pax = @p15, total_price = @p16, trip_code = @p17, trip_date = @p18, trip_id = @p19, trip_type = @p20
WHERE id = @p21;
[2025-09-07 15:27:19.156 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.child_num, b.client_email, b.client_id, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-07 15:27:19.454 +03:00  INF]  Executed DbCommand (20ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-07 15:27:31.989 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-07 15:27:32.023 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 20078.3301ms
[2025-09-07 15:27:32.023 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-07 15:27:32.040 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 4 application/json; charset=utf-8 20488.8507ms
