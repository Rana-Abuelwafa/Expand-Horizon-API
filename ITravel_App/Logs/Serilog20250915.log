[2025-09-15 10:10:26.374 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 10:10:27.201 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 10:10:27.202 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 10:10:27.337 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 10:10:27.337 +03:00  INF]  Hosting environment: Development
[2025-09-15 10:10:27.337 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 10:10:31.581 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 10:10:33.561 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 2031.473ms
[2025-09-15 10:10:34.286 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 10:10:34.295 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 8.5324ms
[2025-09-15 10:10:34.458 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 10:10:34.547 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 89.0478ms
[2025-09-15 10:10:35.574 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 10:10:35.714 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 140.6025ms
[2025-09-15 10:11:48.606 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 10:11:49.901 +03:00  INF]  CORS policy execution successful.
[2025-09-15 10:11:49.903 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:11:49.930 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 10:11:49.941 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 5.9798ms
[2025-09-15 10:11:49.942 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:11:49.946 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.InvalidOperationException: Unable to resolve service for type 'ITravel_App.Services.PdfServices' while attempting to activate 'ITravel_App.Controllers.BookingController'.
   at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method10(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 10:11:49.980 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 1374.7517ms
[2025-09-15 10:16:11.871 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 10:16:12.443 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 10:16:12.444 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 10:16:12.629 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 10:16:12.629 +03:00  INF]  Hosting environment: Development
[2025-09-15 10:16:12.630 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 10:16:13.386 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 10:16:13.722 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 348.5078ms
[2025-09-15 10:16:13.760 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 10:16:13.760 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 10:16:13.782 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 21.8352ms
[2025-09-15 10:16:13.958 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 198.1767ms
[2025-09-15 10:16:14.158 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 10:16:14.300 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 154.6862ms
[2025-09-15 10:16:54.984 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 10:16:55.159 +03:00  INF]  CORS policy execution successful.
[2025-09-15 10:16:55.161 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:16:55.210 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 10:16:57.723 +03:00  INF]  Executed DbCommand (62ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 10:16:57.963 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 10:16:58.000 +03:00  INF]  Executed DbCommand (11ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 10:16:58.155 +03:00  INF]  Executed DbCommand (26ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 10:16:58.373 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 3155.8063ms
[2025-09-15 10:16:58.375 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:16:58.379 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.AggregateException: One or more errors occurred. (Unable to load DLL 'libwkhtmltox' or one of its dependencies: The specified module could not be found. (0x8007007E))
 ---> System.DllNotFoundException: Unable to load DLL 'libwkhtmltox' or one of its dependencies: The specified module could not be found. (0x8007007E)
   at DinkToPdf.WkHtmlToXBindings.wkhtmltopdf_init(Int32 useGraphics)
   at DinkToPdf.PdfTools.Load()
   at DinkToPdf.BasicConverter.Convert(IDocument document)
   at DinkToPdf.SynchronizedConverter.<>n__0(IDocument document)
   at DinkToPdf.SynchronizedConverter.<>c__DisplayClass5_0.<Convert>b__0()
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   --- End of inner exception stack trace ---
   at DinkToPdf.SynchronizedConverter.Invoke[TResult](Func`1 delegate)
   at DinkToPdf.SynchronizedConverter.Convert(IDocument document)
   at ITravel_App.Services.PdfServices.GeneratePdfFromHtml(String htmlContent) in D:\horizen\api\ITravel_App\ITravel_App\Services\PdfServices.cs:line 31
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 123
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 10:16:58.489 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 3504.5864ms
[2025-09-15 10:28:21.015 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 10:28:21.718 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 10:28:21.719 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 10:28:21.824 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 10:28:21.825 +03:00  INF]  Hosting environment: Development
[2025-09-15 10:28:21.825 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 10:28:23.039 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 10:28:23.497 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 469.7046ms
[2025-09-15 10:28:23.717 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 10:28:23.724 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 6.0923ms
[2025-09-15 10:28:23.866 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 10:28:24.133 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 267.4613ms
[2025-09-15 10:28:24.798 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 10:28:24.863 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 65.8702ms
[2025-09-15 10:29:08.809 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 10:29:09.006 +03:00  INF]  CORS policy execution successful.
[2025-09-15 10:29:09.009 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:29:09.040 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 10:29:10.802 +03:00  INF]  Executed DbCommand (62ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 10:29:11.016 +03:00  INF]  Executed DbCommand (6ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 10:29:11.049 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 10:29:11.188 +03:00  INF]  Executed DbCommand (15ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 10:29:19.365 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 10317.9813ms
[2025-09-15 10:29:19.367 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 10:29:19.372 +03:00  ERR]  An unhandled exception has occurred while executing the request.
Microsoft.Playwright.PlaywrightException: Executable doesn't exist at C:\Users\Pro\AppData\Local\ms-playwright\chromium_headless_shell-1187\chrome-win\headless_shell.exe
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë Looks like Playwright was just installed or updated.       ‚ïë
‚ïë Please run the following command to download new browsers: ‚ïë
‚ïë                                                            ‚ïë
‚ïë     pwsh bin/Debug/netX/playwright.ps1 install             ‚ïë
‚ïë                                                            ‚ïë
‚ïë <3 Playwright Team                                         ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
   at Microsoft.Playwright.Transport.Connection.InnerSendMessageToServerAsync[T](ChannelOwner object, String method, Dictionary`2 dictionary, Boolean keepNulls) in /_/src/Playwright/Transport/Connection.cs:line 201
   at Microsoft.Playwright.Transport.Connection.WrapApiCallAsync[T](Func`1 action, Boolean isInternal, String title) in /_/src/Playwright/Transport/Connection.cs:line 499
   at Microsoft.Playwright.Core.BrowserType.LaunchAsync(BrowserTypeLaunchOptions options) in /_/src/Playwright/Core/BrowserType.cs:line 56
   at ITravel_App.Services.PdfServices.GeneratePdfFromHtmlAsync(String htmlContent) in D:\horizen\api\ITravel_App\ITravel_App\Services\PdfServices.cs:line 35
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 124
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 10:29:19.396 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 10587.1535ms
[2025-09-15 13:15:03.878 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:15:04.646 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:15:04.647 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:15:04.753 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:15:04.753 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:15:04.753 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:15:05.878 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:15:06.250 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 384.0854ms
[2025-09-15 13:15:06.484 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:15:06.490 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 5.5644ms
[2025-09-15 13:15:06.904 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:15:06.988 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 83.8502ms
[2025-09-15 13:15:07.443 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:15:07.527 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 84.317ms
[2025-09-15 13:16:09.043 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:16:10.430 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:16:10.433 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:16:10.467 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:16:12.876 +03:00  INF]  Executed DbCommand (66ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:16:13.101 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:16:13.132 +03:00  INF]  Executed DbCommand (6ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:16:13.269 +03:00  INF]  Executed DbCommand (21ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:16:13.536 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 3064.8192ms
[2025-09-15 13:16:13.537 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:16:13.539 +03:00  ERR]  An unhandled exception has occurred while executing the request.
System.Exception: 



Welcome to QuestPDF! üëã 

QuestPDF is an open-source library committed to long-term sustainability and continuous improvement. 

To maintain high-quality development and support while keeping the library free for most users, we use a fair pricing model where only larger organizations help by providing necessary funding for the project. 

If your organization‚Äôs annual gross revenue exceeds $1M USD, a Commercial License is required for production use (you can freely evaluate and test QuestPDF in non-production environments at no cost). In that case, please share this information with your team or management. By purchasing a license, you directly contribute to the ongoing development and reliability of QuestPDF. 

For details on the license types and determining which applies to you, please visit: https://www.questpdf.com/license/ 

We trust our users. To continue, no license key is needed. Instead, simply select and configure the appropriate license in your code. For example, if you qualify for the Community license, add: 

> QuestPDF.Settings.License = LicenseType.Community; 

Thank you for supporting QuestPDF! ‚ù§Ô∏è By choosing the right license, you help ensure that our project remains transparent, sustainable, and continuously improving for everyone. üöÄ 




   at QuestPDF.Drawing.DocumentGenerator.ValidateLicense()
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at ITravel_App.Services.BookingPdfService.GenerateBookingPdf(BookingWithTripDetailsAll _model) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 97
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 125
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 13:16:13.586 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 4549.0958ms
[2025-09-15 13:17:43.170 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:17:43.815 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:17:43.816 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:17:44.039 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:17:44.040 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:17:44.040 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:17:44.948 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:17:45.265 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 326.5988ms
[2025-09-15 13:17:45.315 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:17:45.315 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:17:45.324 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 9.3623ms
[2025-09-15 13:17:45.399 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 84.8482ms
[2025-09-15 13:17:45.529 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:17:45.618 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 88.808ms
[2025-09-15 13:18:35.280 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:18:35.476 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:18:35.479 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:18:35.511 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:18:37.329 +03:00  INF]  Executed DbCommand (71ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:18:37.683 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:18:37.719 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:18:37.851 +03:00  INF]  Executed DbCommand (17ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:18:38.050 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 2534.5764ms
[2025-09-15 13:18:38.051 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:18:38.052 +03:00  ERR]  An unhandled exception has occurred while executing the request.
QuestPDF.Drawing.Exceptions.DocumentComposeException: Cannot load an image under the provided relative path, file not found: logo.png
   at QuestPDF.Infrastructure.StaticImageCache.AdjustPath(String filePath)
   at QuestPDF.Infrastructure.StaticImageCache.LoadFromCache(String filePath)
   at QuestPDF.Fluent.ImageExtensions.Image(IContainer parent, String filePath)
   at QuestPDF.Fluent.ImageExtensions.Image(IContainer parent, String filePath, ImageScaling scaling)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__3(RowDescriptor row) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 23
   at QuestPDF.Fluent.RowExtensions.Row(IContainer element, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__2(ColumnDescriptor col) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 21
   at QuestPDF.Fluent.ColumnExtensions.Column(IContainer element, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__1(PageDescriptor page) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 18
   at QuestPDF.Fluent.PageExtensions.Page(IDocumentContainer document, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__0(IDocumentContainer container) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 15
   at QuestPDF.Fluent.Document.Compose(IDocumentContainer container)
   at QuestPDF.Drawing.DocumentGenerator.ConfigureContent(IDocument document, DocumentSettings settings, Boolean useOriginalImages)
   at QuestPDF.Drawing.DocumentGenerator.RenderSingleDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.RenderDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at ITravel_App.Services.BookingPdfService.GenerateBookingPdf(BookingWithTripDetailsAll _model) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 97
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 125
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 13:18:38.093 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 2813.2633ms
[2025-09-15 13:20:49.483 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:20:49.983 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:20:49.983 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:20:50.194 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:20:50.194 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:20:50.194 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:20:51.245 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:20:51.568 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 336.3093ms
[2025-09-15 13:20:52.302 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:20:52.318 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 15.9596ms
[2025-09-15 13:20:52.417 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:20:52.483 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.304ms
[2025-09-15 13:20:52.634 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:20:52.697 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 62.8959ms
[2025-09-15 13:22:34.968 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:22:35.153 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:22:35.155 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:22:35.191 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:22:36.974 +03:00  INF]  Executed DbCommand (64ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:22:37.289 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:22:37.322 +03:00  INF]  Executed DbCommand (6ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:22:37.460 +03:00  INF]  Executed DbCommand (13ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:22:37.660 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 2464.1214ms
[2025-09-15 13:22:37.663 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:22:37.665 +03:00  ERR]  An unhandled exception has occurred while executing the request.
QuestPDF.Drawing.Exceptions.DocumentComposeException: Cannot load an image under the provided relative path, file not found: logo.png
   at QuestPDF.Infrastructure.StaticImageCache.AdjustPath(String filePath)
   at QuestPDF.Infrastructure.StaticImageCache.LoadFromCache(String filePath)
   at QuestPDF.Fluent.ImageExtensions.Image(IContainer parent, String filePath)
   at QuestPDF.Fluent.ImageExtensions.Image(IContainer parent, String filePath, ImageScaling scaling)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__3(RowDescriptor row) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 23
   at QuestPDF.Fluent.RowExtensions.Row(IContainer element, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__2(ColumnDescriptor col) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 21
   at QuestPDF.Fluent.ColumnExtensions.Column(IContainer element, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__1(PageDescriptor page) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 18
   at QuestPDF.Fluent.PageExtensions.Page(IDocumentContainer document, Action`1 handler)
   at ITravel_App.Services.BookingPdfService.<>c__DisplayClass0_0.<GenerateBookingPdf>b__0(IDocumentContainer container) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 15
   at QuestPDF.Fluent.Document.Compose(IDocumentContainer container)
   at QuestPDF.Drawing.DocumentGenerator.ConfigureContent(IDocument document, DocumentSettings settings, Boolean useOriginalImages)
   at QuestPDF.Drawing.DocumentGenerator.RenderSingleDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.RenderDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at ITravel_App.Services.BookingPdfService.GenerateBookingPdf(BookingWithTripDetailsAll _model) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 97
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 125
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 13:22:37.703 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 2735.007ms
[2025-09-15 13:27:34.273 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:27:34.773 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:27:34.773 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:27:34.946 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:27:34.946 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:27:34.946 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:27:35.880 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:27:36.192 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 321.7639ms
[2025-09-15 13:27:36.949 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:27:36.955 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 6.3621ms
[2025-09-15 13:27:36.989 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:27:37.035 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 46.7987ms
[2025-09-15 13:27:37.327 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:27:37.387 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 59.2749ms
[2025-09-15 13:28:17.493 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:28:17.813 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:28:17.817 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:28:17.879 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:28:19.628 +03:00  INF]  Executed DbCommand (65ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:28:19.865 +03:00  INF]  Executed DbCommand (10ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:28:19.905 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:28:20.031 +03:00  INF]  Executed DbCommand (15ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:28:20.769 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 2886.4901ms
[2025-09-15 13:28:20.770 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:28:20.772 +03:00  ERR]  An unhandled exception has occurred while executing the request.
QuestPDF.Drawing.Exceptions.DocumentLayoutException: The provided document content contains conflicting size constraints. For example, some elements may require more space than is available. 

The layout issue is likely present in the following part of the document: 

-> Document

-> Page

-> Page

-> Content

-> Content

-> Relative(1)



To learn more, please analyse the document measurement of the problematic location: 

üö® AspectRatio üö®
==================
Available Space: (Width: 277.500, Height: 802.000)
Space Plan: Wrap
Wrap Reason: To preserve the target aspect ratio, the content requires more horizontal space than available.
------------------
Content Direction: LeftToRight
Ratio: 2.1263463
Option: FitHeight


   üü¢ Image
   =========
   Available Space: (Width: 0.000, Height: 0.000)
   Space Plan: FullRender (Width: 0.000, Height: 0.000)
   ---------
   Document Image: QuestPDF.Infrastructure.Image


Legend: 
üö® - Element that is likely the root cause of the layout issue based on library heuristics and prediction. 
üî¥ - Element that cannot be drawn due to the provided layout constraints. This element likely causes the layout issue, or one of its descendant children is responsible for the problem. 
üü° - Element that can be partially drawn on the page and will also be rendered on the consecutive page. In more complex layouts, this element may also cause issues or contain a child that is the actual root cause.
üü¢ - Element that is successfully and completely drawn on the page.
‚ö™Ô∏è - Element that has not been drawn on the faulty page. Its children are omitted.


This detailed information is generated because you run the application with a debugger attached or with the QuestPDF.Settings.EnableDebugging flag set to true. 
   at QuestPDF.Drawing.DocumentGenerator.<RenderPass>g__ThrowLayoutException|12_2(<>c__DisplayClass12_0&)
   at QuestPDF.Drawing.DocumentGenerator.RenderPass(PageContext pageContext, IDocumentCanvas canvas, ContainerElement content)
   at QuestPDF.Drawing.DocumentGenerator.RenderSingleDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.RenderDocument(IDocumentCanvas canvas, IDocument document, DocumentSettings settings)
   at QuestPDF.Drawing.DocumentGenerator.GeneratePdf(SkWriteStream stream, IDocument document)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document, Stream stream)
   at QuestPDF.Fluent.GenerateExtensions.GeneratePdf(IDocument document)
   at ITravel_App.Services.BookingPdfService.GenerateBookingPdf(BookingWithTripDetailsAll _model) in D:\horizen\api\ITravel_App\ITravel_App\Services\BookingPdfService.cs:line 99
   at ITravel_App.Controllers.BookingController.ConfirmBooking(ConfirmBookingReq req) in D:\horizen\api\ITravel_App\ITravel_App\Controllers\BookingController.cs:line 125
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeNextResourceFilter>g__Awaited|25_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Rethrow(ResourceExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.InvokeFilterPipelineAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Localization.RequestLocalizationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
[2025-09-15 13:28:20.808 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 500 null text/plain; charset=utf-8 3315.1042ms
[2025-09-15 13:29:36.438 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:29:37.189 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:29:37.191 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:29:37.371 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:29:37.371 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:29:37.371 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:29:38.821 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:29:39.101 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 291.0323ms
[2025-09-15 13:29:39.158 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:29:39.205 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 47.3602ms
[2025-09-15 13:29:39.206 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:29:39.288 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 82.0002ms
[2025-09-15 13:29:39.378 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:29:39.561 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 183.4462ms
[2025-09-15 13:30:19.195 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:30:19.413 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:30:19.417 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:30:19.452 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:30:21.204 +03:00  INF]  Executed DbCommand (89ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:30:21.437 +03:00  INF]  Executed DbCommand (9ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:30:21.472 +03:00  INF]  Executed DbCommand (7ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:30:21.598 +03:00  INF]  Executed DbCommand (15ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:30:35.829 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-15 13:30:35.877 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 16420.5821ms
[2025-09-15 13:30:35.877 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:30:35.889 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 4 application/json; charset=utf-8 16693.2106ms
[2025-09-15 13:38:42.159 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:38:42.627 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:38:42.627 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:38:42.810 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:38:42.810 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:38:42.810 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:38:43.873 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:38:44.232 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 371.3533ms
[2025-09-15 13:38:44.295 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:38:44.302 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 7.0128ms
[2025-09-15 13:38:44.330 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:38:44.383 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 53.0366ms
[2025-09-15 13:38:45.176 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:38:45.369 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 193.2558ms
[2025-09-15 13:39:41.212 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:39:41.927 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:39:41.928 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:39:42.060 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:39:42.061 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:39:42.061 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:39:43.296 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:39:43.616 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 336.3406ms
[2025-09-15 13:39:44.463 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:39:44.469 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 6.0501ms
[2025-09-15 13:39:44.514 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:39:44.559 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 45.6845ms
[2025-09-15 13:39:44.922 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:39:44.985 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 63.2124ms
[2025-09-15 13:40:56.332 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:40:56.539 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:40:56.541 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:40:56.571 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:40:58.381 +03:00  INF]  Executed DbCommand (72ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:40:58.621 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:40:58.652 +03:00  INF]  Executed DbCommand (5ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:40:58.785 +03:00  INF]  Executed DbCommand (15ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:41:11.700 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-15 13:41:11.729 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 15154.4825ms
[2025-09-15 13:41:11.729 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:41:11.745 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 4 application/json; charset=utf-8 15412.3864ms
[2025-09-15 13:44:26.802 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:44:27.383 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:44:27.383 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:44:27.561 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:44:27.561 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:44:27.561 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:44:28.592 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:44:28.991 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 403.4145ms
[2025-09-15 13:44:29.030 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:44:29.065 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:44:29.070 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 44.2766ms
[2025-09-15 13:44:29.220 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 154.4666ms
[2025-09-15 13:44:29.338 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:44:29.633 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 295.2512ms
[2025-09-15 13:45:54.555 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - application/json-patch+json 61
[2025-09-15 13:45:54.774 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:45:54.776 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:45:54.809 +03:00  INF]  Route matched with {action = "ConfirmBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ConfirmBooking(ITravelApp.Data.Models.Bookings.ConfirmBookingReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:45:56.471 +03:00  INF]  Executed DbCommand (70ms) [Parameters=[@__req_booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id, t.booking_code, t.booking_code_auto, t.booking_date, t.booking_notes, t.booking_status, t.child_num, t.client_email, t.client_id, t.client_name, t.client_nationality, t.client_phone, t.currency_code, t.gift_code, t.infant_num, t.pickup_address, t.pickup_time, t.total_pax, t.total_price, t.trip_code, t.trip_date, t.trip_id, t.trip_type
FROM trips_booking AS t
WHERE t.id = @__req_booking_id_0
LIMIT 2
[2025-09-15 13:45:56.694 +03:00  INF]  Executed DbCommand (14ms) [Parameters=[@p22='?' (DbType = Int64), @p0='?', @p1='?', @p2='?' (DbType = DateTime2), @p3='?', @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?', @p7='?', @p8='?', @p9='?', @p10='?', @p11='?', @p12='?', @p13='?' (DbType = Int32), @p14='?', @p15='?', @p16='?' (DbType = Int32), @p17='?' (DbType = Decimal), @p18='?', @p19='?' (DbType = DateTime2), @p20='?' (DbType = Int64), @p21='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
UPDATE trips_booking SET booking_code = @p0, booking_code_auto = @p1, booking_date = @p2, booking_notes = @p3, booking_status = @p4, child_num = @p5, client_email = @p6, client_id = @p7, client_name = @p8, client_nationality = @p9, client_phone = @p10, currency_code = @p11, gift_code = @p12, infant_num = @p13, pickup_address = @p14, pickup_time = @p15, total_pax = @p16, total_price = @p17, trip_code = @p18, trip_date = @p19, trip_id = @p20, trip_type = @p21
WHERE id = @p22;
[2025-09-15 13:45:56.733 +03:00  INF]  Executed DbCommand (8ms) [Parameters=[@__req_lang_code_0='?', @__req_booking_id_1='?' (DbType = Int64), @__req_client_id_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.lang_code = @__req_lang_code_0 AND b.booking_id = @__req_booking_id_1 AND b.client_id = @__req_client_id_2
LIMIT 2
[2025-09-15 13:45:56.850 +03:00  INF]  Executed DbCommand (16ms) [Parameters=[@__ToLower_2='?', @__req_trip_id_0='?' (DbType = Int64), @__req_trip_type_1='?' (DbType = Int16)], CommandType='"Text"', CommandTimeout='30']
SELECT t.id::numeric AS trip_pickup_id, t1.lang_code, t."order", t.pickup_code, t.pickup_default_name, t1.pickup_description, t1.pickup_name, t.trip_id, t.trip_type, t.duration
FROM trip_pickups_main AS t
INNER JOIN (
    SELECT t0.lang_code, t0.pickup_description, t0.pickup_name, t0.trip_pickup_id
    FROM trip_pickups_translations AS t0
    WHERE lower(t0.lang_code) = @__ToLower_2
) AS t1 ON t.id = t1.trip_pickup_id
WHERE t.trip_id = @__req_trip_id_0 AND t.trip_type = @__req_trip_type_1
ORDER BY t."order"
[2025-09-15 13:46:11.390 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Boolean'.
[2025-09-15 13:46:11.457 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App) in 16642.0188ms
[2025-09-15 13:46:11.457 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.ConfirmBooking (ITravel_App)'
[2025-09-15 13:46:11.468 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/ConfirmBooking - 200 4 application/json; charset=utf-8 16913.4088ms
[2025-09-15 13:52:50.845 +03:00  INF]  User profile is available. Using 'C:\Users\Pro\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
[2025-09-15 13:52:51.548 +03:00  INF]  Now listening on: https://localhost:7045
[2025-09-15 13:52:51.549 +03:00  INF]  Now listening on: http://localhost:5124
[2025-09-15 13:52:51.906 +03:00  INF]  Application started. Press Ctrl+C to shut down.
[2025-09-15 13:52:51.906 +03:00  INF]  Hosting environment: Development
[2025-09-15 13:52:51.907 +03:00  INF]  Content root path: D:\horizen\api\ITravel_App\ITravel_App
[2025-09-15 13:52:53.323 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/index.html - null null
[2025-09-15 13:52:53.985 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/index.html - 200 null text/html;charset=utf-8 672.5418ms
[2025-09-15 13:52:54.112 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - null null
[2025-09-15 13:52:54.175 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/_vs/browserLink - null null
[2025-09-15 13:52:54.187 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_framework/aspnetcore-browser-refresh.js - 200 16507 application/javascript; charset=utf-8 71.6565ms
[2025-09-15 13:52:54.393 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/_vs/browserLink - 200 null text/javascript; charset=UTF-8 218.6016ms
[2025-09-15 13:52:54.653 +03:00  INF]  Request starting HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - null null
[2025-09-15 13:52:54.826 +03:00  INF]  Request finished HTTP/2 GET https://localhost:7045/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 172.7678ms
[2025-09-15 13:53:46.969 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/Booking/GetMyBooking - application/json-patch+json 49
[2025-09-15 13:53:47.162 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:53:47.165 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.BookingController.GetMyBooking (ITravel_App)'
[2025-09-15 13:53:47.197 +03:00  INF]  Route matched with {action = "GetMyBooking", controller = "Booking"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyBooking(ITravelApp.Data.Models.global.LangReq) on controller ITravel_App.Controllers.BookingController (ITravel_App).
[2025-09-15 13:53:52.126 +03:00  INF]  Executed DbCommand (154ms) [Parameters=[@__client_id_0='?', @__ToLower_1='?', @__ToLower_2='?'], CommandType='"Text"', CommandTimeout='30']
SELECT b.booking_code, b.booking_code_auto, b.booking_date, b.booking_datestr, b.booking_id, b.booking_notes, b.booking_status, b.booking_status_id, b.cancelation_policy, b.child_num, b.client_email, b.client_id, b.client_name, b.client_nationality, b.client_phone, b.currency_code, b.default_img, b.gift_code, b.infant_num, b.lang_code, b.pickup_address, b.pickup_time, b.release_days, b.review_rate, b.total_pax, b.total_price, b.trip_code, b.trip_code_auto, b.trip_date, b.trip_datestr, b.trip_description, b.trip_id, b.trip_name, b.trip_type
FROM bookingwithdetails AS b
WHERE b.client_id = @__client_id_0 AND lower(b.lang_code) = @__ToLower_1 AND lower(b.currency_code) = @__ToLower_2
[2025-09-15 13:53:52.289 +03:00  INF]  Executed DbCommand (12ms) [Parameters=[@__ToLower_1='?', @__booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT b.extra_id, b.booking_id, b.extra_count, f0.facility_name AS extra_name, f1.extra_price, b.id
FROM booking_extra AS b
INNER JOIN (
    SELECT f.facility_id, f.facility_name
    FROM facility_translations AS f
    WHERE lower(f.lang_code) = @__ToLower_1
) AS f0 ON b.extra_id = f0.facility_id
INNER JOIN facility_main AS f1 ON f0.facility_id = f1.id
WHERE b.booking_id = @__booking_id_0
[2025-09-15 13:53:52.298 +03:00  INF]  Executed DbCommand (1ms) [Parameters=[@__ToLower_1='?', @__booking_id_0='?' (DbType = Int64)], CommandType='"Text"', CommandTimeout='30']
SELECT b.extra_id, b.booking_id, b.extra_count, f0.facility_name AS extra_name, f1.extra_price, b.id
FROM booking_extra AS b
INNER JOIN (
    SELECT f.facility_id, f.facility_name
    FROM facility_translations AS f
    WHERE lower(f.lang_code) = @__ToLower_1
) AS f0 ON b.extra_id = f0.facility_id
INNER JOIN facility_main AS f1 ON f0.facility_id = f1.id
WHERE b.booking_id = @__booking_id_0
[2025-09-15 13:53:52.314 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[ITravelApp.Data.Models.Bookings.Client.BookingSummary, ITravelApp.Data, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
[2025-09-15 13:53:52.410 +03:00  INF]  Executed action ITravel_App.Controllers.BookingController.GetMyBooking (ITravel_App) in 5208.3889ms
[2025-09-15 13:53:52.411 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.BookingController.GetMyBooking (ITravel_App)'
[2025-09-15 13:53:52.425 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/Booking/GetMyBooking - 200 1786 application/json; charset=utf-8 5456.5475ms
[2025-09-15 13:54:22.496 +03:00  INF]  Request starting HTTP/2 POST https://localhost:7045/api/TravelClient/GetMyBookingCount?clientId=96b8d3c5-cdd6-4497-af19-2cbcd361f129 - null 0
[2025-09-15 13:54:22.513 +03:00  INF]  CORS policy execution successful.
[2025-09-15 13:54:22.513 +03:00  INF]  Executing endpoint 'ITravel_App.Controllers.TravelClientController.GetMyBookingCount (ITravel_App)'
[2025-09-15 13:54:22.524 +03:00  INF]  Route matched with {action = "GetMyBookingCount", controller = "TravelClient"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetMyBookingCount(System.String) on controller ITravel_App.Controllers.TravelClientController (ITravel_App).
[2025-09-15 13:54:22.583 +03:00  INF]  Executed DbCommand (2ms) [Parameters=[@__client_id_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT count(*)::int
FROM trips_booking AS t
WHERE t.client_id = @__client_id_0
[2025-09-15 13:54:22.593 +03:00  INF]  Executing OkObjectResult, writing value of type 'System.Int32'.
[2025-09-15 13:54:22.594 +03:00  INF]  Executed action ITravel_App.Controllers.TravelClientController.GetMyBookingCount (ITravel_App) in 69.1395ms
[2025-09-15 13:54:22.594 +03:00  INF]  Executed endpoint 'ITravel_App.Controllers.TravelClientController.GetMyBookingCount (ITravel_App)'
[2025-09-15 13:54:22.595 +03:00  INF]  Request finished HTTP/2 POST https://localhost:7045/api/TravelClient/GetMyBookingCount?clientId=96b8d3c5-cdd6-4497-af19-2cbcd361f129 - 200 1 application/json; charset=utf-8 98.7878ms
